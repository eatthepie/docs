<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-security/drawing-numbers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Drawing Numbers | Eat The Pie Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.eatthepie.xyz/img/header.png"><meta data-rh="true" name="twitter:image" content="https://docs.eatthepie.xyz/img/header.png"><meta data-rh="true" property="og:url" content="https://docs.eatthepie.xyz/security/drawing-numbers"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Drawing Numbers | Eat The Pie Docs"><meta data-rh="true" name="description" content="🎯 Introduction"><meta data-rh="true" property="og:description" content="🎯 Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.eatthepie.xyz/security/drawing-numbers"><link data-rh="true" rel="alternate" href="https://docs.eatthepie.xyz/security/drawing-numbers" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.eatthepie.xyz/security/drawing-numbers" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ad75fb52.css">
<script src="/assets/js/runtime~main.ce6c0825.js" defer="defer"></script>
<script src="/assets/js/main.8ea16efb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Eat The Pie Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Eat The Pie Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Eat The Pie Documentation</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/gameplay/rules">🎮 Gameplay</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/security/drawing-numbers">🛡️ Security</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/security/drawing-numbers">Drawing Numbers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/security/open-source">Open and Permanent Code</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/smart-contracts/lottery-contract">⛓️ Smart Contracts</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/deployments/main">🌐 Deployments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/links/main">🔗 Links</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">🛡️ Security</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Drawing Numbers</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Drawing Numbers</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-introduction">🎯 Introduction<a href="#-introduction" class="hash-link" aria-label="Direct link to 🎯 Introduction" title="Direct link to 🎯 Introduction">​</a></h2>
<p>At the heart of every lottery is its random number generation - the crucial mechanism that determines winners. While traditional lotteries rely on central authorities, Eat the Pie harnesses Ethereum&#x27;s decentralized network of validators and Verifiable Delay Functions (VDFs) to ensure true randomness. This creates a provably fair system where no single entity can influence the outcome.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-why-ethereum">🌐 Why Ethereum?<a href="#-why-ethereum" class="hash-link" aria-label="Direct link to 🌐 Why Ethereum?" title="Direct link to 🌐 Why Ethereum?">​</a></h2>
<p>Ethereum stands out as the ideal platform for this lottery system due to its nature as a truly decentralized blockchain. In this ecosystem:</p>
<ul>
<li>🔒 No single entity can control or manipulate the system.</li>
<li>👁️ Transactions and smart contract executions are transparent and verifiable.</li>
<li>🏗️ The network&#x27;s inherent properties provide a foundation for building provably fair systems.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-enhancing-security-with-vdfs">🛡️ Enhancing Security with VDFs<a href="#️-enhancing-security-with-vdfs" class="hash-link" aria-label="Direct link to 🛡️ Enhancing Security with VDFs" title="Direct link to 🛡️ Enhancing Security with VDFs">​</a></h2>
<p>Running a transparent lottery on a blockchain faces one critical challenge: achieving 100% random outcomes that no party can predict. This raises two key questions: How can validators be prevented from gaining any advantage? And how can the settling block&#x27;s validator&#x27;s integrity be ensured?</p>
<p>Eat the Pie solves this through Verifiable Delay Functions (VDFs), creating a calculated time barrier between game completion and number generation. This engineered delay effectively neutralizes any potential validator influence. While this means waiting slightly longer for results, it guarantees absolute fairness and trustworthiness in every draw.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-the-drawing-process">🔢 The Drawing Process<a href="#-the-drawing-process" class="hash-link" aria-label="Direct link to 🔢 The Drawing Process" title="Direct link to 🔢 The Drawing Process">​</a></h2>
<p>Let&#x27;s break down the intricate process of how random winning numbers are generated:</p>
<br>
<img src="/img/security.svg" alt="Eat The Pie Process" width="800">
<br>
<ol>
<li>
<p><strong>🚀 Initiating the Draw</strong></p>
<ul>
<li>Game threshold is met and function: <b><code>initiateDraw()</code></b> gets called.</li>
<li>At a predetermined block (let&#x27;s call it block X), this function is called to start the drawing process.</li>
<li>The system waits 4 epochs (~30 minutes) before using the <a href="https://eth2book.info/bellatrix/part2/building_blocks/randomness/" target="_blank" rel="noopener noreferrer">RANDAO value</a> from <b><code>block.prevrandao</code></b>.</li>
<li>Purpose of Delay: To minimize the predictability and biasability of <b><code>block.prevrandao</code></b>.</li>
</ul>
</li>
<li>
<p><strong>🎲 Setting the Random Value</strong></p>
<ul>
<li>Once the 4 epochs delay has passed, function: <b><code>setRandom()</code></b> gets called.</li>
<li>This sets the <b><code>block.prevrandao</code></b> value that will serve as the input of the VDF function.</li>
<li>At this point, the game is settled, but nobody knows the numbers until somebody solves the VDF.</li>
</ul>
</li>
<li>
<p><strong>⏳ VDF Computation</strong></p>
<ul>
<li>The VDF gets computed offchain (by anyone) using the <b><code>block.prevrandao</code></b> from above.</li>
<li>The parameters of the VDF have been intentionally set to make this computation time-intensive (depending on hardware, can range from several hours to a day).</li>
<li>This extended computation time is a critical security feature, ensuring that improvements in future hardware and software implementation still make this unbreakable.</li>
</ul>
</li>
<li>
<p><strong>✅ Submitting and Verifying the VDF Proof</strong></p>
<ul>
<li>Someone finally has a proof and submits it onchain via the function: <b><code>submitVDFProof()</code></b></li>
<li>Only if the proof is valid do the numbers then get revealed and committed.</li>
</ul>
</li>
<li>
<p><strong>🏁 Finalizing the Draw</strong></p>
<ul>
<li>Anyone can now call the function <b><code>calculatePayouts()</code></b>, which settles the prizes and winners.</li>
<li>The round is over and users can then claim their prizes.</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>Note</strong>: The entire process is public and permissionless. Any participant can help progress the game state by calling these functions.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-key-concepts-explained">🧠 Key Concepts Explained<a href="#-key-concepts-explained" class="hash-link" aria-label="Direct link to 🧠 Key Concepts Explained" title="Direct link to 🧠 Key Concepts Explained">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-randao-and-blockprevrandao">🔢 RANDAO and block.prevrandao<a href="#-randao-and-blockprevrandao" class="hash-link" aria-label="Direct link to 🔢 RANDAO and block.prevrandao" title="Direct link to 🔢 RANDAO and block.prevrandao">​</a></h3>
<p><b><code>block.prevrandao</code></b> serves as Ethereum&#x27;s built-in randomness source, powered by the beacon chain&#x27;s RANDAO mechanism:</p>
<ul>
<li>Generated from thousands of validator contributions</li>
<li>Changes every block (~12 seconds)</li>
<li>Manipulation-resistant by design</li>
<li>Unpredictable beyond one epoch</li>
<li>Provides verifiable randomness at the protocol level</li>
</ul>
<p>Want to learn more? Check out these resources:</p>
<ul>
<li><a href="https://eth2book.info/bellatrix/part2/building_blocks/randomness/" target="_blank" rel="noopener noreferrer">Deep dive into RANDAO</a></li>
<li><a href="https://eips.ethereum.org/EIPS/eip-4399" target="_blank" rel="noopener noreferrer">EIP 4399: Supplant DIFFICULTY opcode with PREVRANDAO</a></li>
<li><a href="https://www.youtube.com/watch?v=rUOBPu4W28c" target="_blank" rel="noopener noreferrer">Video explanation of RANDAO</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-vdf-verifiable-delay-function">⏱️ VDF (Verifiable Delay Function)<a href="#️-vdf-verifiable-delay-function" class="hash-link" aria-label="Direct link to ⏱️ VDF (Verifiable Delay Function)" title="Direct link to ⏱️ VDF (Verifiable Delay Function)">​</a></h3>
<p>The lottery implements the <a href="https://eprint.iacr.org/2018/627.pdf" target="_blank" rel="noopener noreferrer">Pietrzak VDF</a>, a cryptographic function that enforces a time delay between input and output. Think of it as a cryptographic time-lock that ensures fairness through forced computation time.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-properties">Key Properties<a href="#key-properties" class="hash-link" aria-label="Direct link to Key Properties" title="Direct link to Key Properties">​</a></h4>
<ol>
<li>
<p><strong>Sequential Computation</strong></p>
<ul>
<li>Operations must be performed in order</li>
<li>Cannot be parallelized or shortened</li>
<li>Hardware improvements don&#x27;t significantly impact minimum time</li>
</ul>
</li>
<li>
<p><strong>Efficient Verification</strong></p>
<ul>
<li>Verification takes milliseconds</li>
<li>On-chain verification possible</li>
<li>Compact proofs (~1kb)</li>
<li>Low gas costs for submission</li>
</ul>
</li>
<li>
<p><strong>Deterministic Security</strong></p>
<ul>
<li>Consistent input/output mapping</li>
<li>Future-proof design principles</li>
<li>No hidden randomness in computation</li>
</ul>
</li>
</ol>
<p>Want to learn more? Check out these resources:</p>
<ul>
<li><a href="https://vdfresearch.org/" target="_blank" rel="noopener noreferrer">VDF Research Blog</a></li>
<li><a href="https://www.youtube.com/watch?v=qf1CN5n8aHM" target="_blank" rel="noopener noreferrer">Video explanation of VDFs</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-why-this-approach-matters">🤔 Why This Approach Matters<a href="#-why-this-approach-matters" class="hash-link" aria-label="Direct link to 🤔 Why This Approach Matters" title="Direct link to 🤔 Why This Approach Matters">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-️-validator-neutralization">1. 🛡️ Validator Neutralization<a href="#1-️-validator-neutralization" class="hash-link" aria-label="Direct link to 1. 🛡️ Validator Neutralization" title="Direct link to 1. 🛡️ Validator Neutralization">​</a></h3>
<p>The combination of RANDAO and VDF ensures that validators cannot predict or influence the outcome, maintaining true randomness in the drawing process.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2--front-running-prevention">2. 🔒 Front-Running Prevention<a href="#2--front-running-prevention" class="hash-link" aria-label="Direct link to 2. 🔒 Front-Running Prevention" title="Direct link to 2. 🔒 Front-Running Prevention">​</a></h3>
<p>The mandatory computation delay creates a temporal barrier that prevents any form of front-running or last-minute exploitation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3--complete-verifiability">3. 🔍 Complete Verifiability<a href="#3--complete-verifiability" class="hash-link" aria-label="Direct link to 3. 🔍 Complete Verifiability" title="Direct link to 3. 🔍 Complete Verifiability">​</a></h3>
<p>Every step in the process can be independently verified on-chain, ensuring transparency without compromising security.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4--future-proof-design">4. 💪 Future-Proof Design<a href="#4--future-proof-design" class="hash-link" aria-label="Direct link to 4. 💪 Future-Proof Design" title="Direct link to 4. 💪 Future-Proof Design">​</a></h3>
<p>The time-locked nature of VDF computation maintains security even as computational power advances, protecting against future technological improvements.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/gameplay/how-to-play"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How To Play</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/security/open-source"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Open and Permanent Code</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-introduction" class="table-of-contents__link toc-highlight">🎯 Introduction</a></li><li><a href="#-why-ethereum" class="table-of-contents__link toc-highlight">🌐 Why Ethereum?</a></li><li><a href="#️-enhancing-security-with-vdfs" class="table-of-contents__link toc-highlight">🛡️ Enhancing Security with VDFs</a></li><li><a href="#-the-drawing-process" class="table-of-contents__link toc-highlight">🔢 The Drawing Process</a></li><li><a href="#-key-concepts-explained" class="table-of-contents__link toc-highlight">🧠 Key Concepts Explained</a><ul><li><a href="#-randao-and-blockprevrandao" class="table-of-contents__link toc-highlight">🔢 RANDAO and block.prevrandao</a></li><li><a href="#️-vdf-verifiable-delay-function" class="table-of-contents__link toc-highlight">⏱️ VDF (Verifiable Delay Function)</a></li></ul></li><li><a href="#-why-this-approach-matters" class="table-of-contents__link toc-highlight">🤔 Why This Approach Matters</a><ul><li><a href="#1-️-validator-neutralization" class="table-of-contents__link toc-highlight">1. 🛡️ Validator Neutralization</a></li><li><a href="#2--front-running-prevention" class="table-of-contents__link toc-highlight">2. 🔒 Front-Running Prevention</a></li><li><a href="#3--complete-verifiability" class="table-of-contents__link toc-highlight">3. 🔍 Complete Verifiability</a></li><li><a href="#4--future-proof-design" class="table-of-contents__link toc-highlight">4. 💪 Future-Proof Design</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>