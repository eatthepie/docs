"use strict";(self.webpackChunkEat_The_Pie_docs=self.webpackChunkEat_The_Pie_docs||[]).push([[76],{8301:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var r=i(4848),t=i(8453);const s={},a="Drawing Numbers",l={id:"security/drawing-numbers",title:"Drawing Numbers",description:"\ud83c\udfaf Introduction",source:"@site/docs/security/drawing-numbers.md",sourceDirName:"security",slug:"/security/drawing-numbers",permalink:"/security/drawing-numbers",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"How To Play",permalink:"/gameplay/how-to-play"},next:{title:"Open and Permanent Code",permalink:"/security/open-source"}},o={},c=[{value:"\ud83c\udfaf Introduction",id:"-introduction",level:2},{value:"\ud83c\udf10 Why Ethereum?",id:"-why-ethereum",level:2},{value:"\ud83d\udee1\ufe0f Enhancing Security with VDFs",id:"\ufe0f-enhancing-security-with-vdfs",level:2},{value:"\ud83d\udd22 The Drawing Process",id:"-the-drawing-process",level:2},{value:"\ud83e\udde0 Key Concepts Explained",id:"-key-concepts-explained",level:2},{value:"\ud83d\udd22 RANDAO and block.prevrandao",id:"-randao-and-blockprevrandao",level:3},{value:"\u23f1\ufe0f VDF (Verifiable Delay Function)",id:"\ufe0f-vdf-verifiable-delay-function",level:3},{value:"Key Properties",id:"key-properties",level:4},{value:"\ud83e\udd14 Why This Approach Matters",id:"-why-this-approach-matters",level:2},{value:"1. \ud83d\udee1\ufe0f Validator Neutralization",id:"1-\ufe0f-validator-neutralization",level:3},{value:"2. \ud83d\udd12 Front-Running Prevention",id:"2--front-running-prevention",level:3},{value:"3. \ud83d\udd0d Complete Verifiability",id:"3--complete-verifiability",level:3},{value:"4. \ud83d\udcaa Future-Proof Design",id:"4--future-proof-design",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"drawing-numbers",children:"Drawing Numbers"})}),"\n",(0,r.jsx)(n.h2,{id:"-introduction",children:"\ud83c\udfaf Introduction"}),"\n",(0,r.jsx)(n.p,{children:"At the heart of every lottery is its random number generation - the crucial mechanism that determines winners. While traditional lotteries rely on central authorities, Eat the Pie harnesses Ethereum's decentralized network of validators and Verifiable Delay Functions (VDFs) to ensure true randomness. This creates a provably fair system where no single entity can influence the outcome."}),"\n",(0,r.jsx)(n.h2,{id:"-why-ethereum",children:"\ud83c\udf10 Why Ethereum?"}),"\n",(0,r.jsx)(n.p,{children:"Ethereum stands out as the ideal platform for this lottery system due to its nature as a truly decentralized blockchain. In this ecosystem:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83d\udd12 No single entity can control or manipulate the system."}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udc41\ufe0f Transactions and smart contract executions are transparent and verifiable."}),"\n",(0,r.jsx)(n.li,{children:"\ud83c\udfd7\ufe0f The network's inherent properties provide a foundation for building provably fair systems."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-enhancing-security-with-vdfs",children:"\ud83d\udee1\ufe0f Enhancing Security with VDFs"}),"\n",(0,r.jsx)(n.p,{children:"Running a transparent lottery on a blockchain faces one critical challenge: achieving 100% random outcomes that no party can predict. This raises two key questions: How can validators be prevented from gaining any advantage? And how can the settling block's validator's integrity be ensured?"}),"\n",(0,r.jsx)(n.p,{children:"Eat the Pie solves this through Verifiable Delay Functions (VDFs), creating a calculated time barrier between game completion and number generation. This engineered delay effectively neutralizes any potential validator influence. While this means waiting slightly longer for results, it guarantees absolute fairness and trustworthiness in every draw."}),"\n",(0,r.jsx)(n.h2,{id:"-the-drawing-process",children:"\ud83d\udd22 The Drawing Process"}),"\n",(0,r.jsx)(n.p,{children:"Let's break down the intricate process of how random winning numbers are generated:"}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)("img",{src:"/img/security.svg",alt:"Eat The Pie Process",width:"800"}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\ud83d\ude80 Initiating the Draw"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Game threshold is met and function: ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"initiateDraw()"})})," gets called."]}),"\n",(0,r.jsx)(n.li,{children:"At a predetermined block (let's call it block X), this function is called to start the drawing process."}),"\n",(0,r.jsxs)(n.li,{children:["The system waits 4 epochs (~30 minutes) before using the ",(0,r.jsx)(n.a,{href:"https://eth2book.info/bellatrix/part2/building_blocks/randomness/",children:"RANDAO value"})," from ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"block.prevrandao"})}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Purpose of Delay: To minimize the predictability and biasability of ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"block.prevrandao"})}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\ud83c\udfb2 Setting the Random Value"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Once the 4 epochs delay has passed, function: ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"setRandom()"})})," gets called."]}),"\n",(0,r.jsxs)(n.li,{children:["This sets the ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"block.prevrandao"})})," value that will serve as the input of the VDF function."]}),"\n",(0,r.jsx)(n.li,{children:"At this point, the game is settled, but nobody knows the numbers until somebody solves the VDF."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u23f3 VDF Computation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The VDF gets computed offchain (by anyone) using the ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"block.prevrandao"})})," from above."]}),"\n",(0,r.jsx)(n.li,{children:"The parameters of the VDF have been intentionally set to make this computation time-intensive (depending on hardware, can range from several hours to a day)."}),"\n",(0,r.jsx)(n.li,{children:"This extended computation time is a critical security feature, ensuring that improvements in future hardware and software implementation still make this unbreakable."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u2705 Submitting and Verifying the VDF Proof"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Someone finally has a proof and submits it onchain via the function: ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"submitVDFProof()"})})]}),"\n",(0,r.jsx)(n.li,{children:"Only if the proof is valid do the numbers then get revealed and committed."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\ud83c\udfc1 Finalizing the Draw"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Anyone can now call the function ",(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"calculatePayouts()"})}),", which settles the prizes and winners."]}),"\n",(0,r.jsx)(n.li,{children:"The round is over and users can then claim their prizes."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": The entire process is public and permissionless. Any participant can help progress the game state by calling these functions."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-key-concepts-explained",children:"\ud83e\udde0 Key Concepts Explained"}),"\n",(0,r.jsx)(n.h3,{id:"-randao-and-blockprevrandao",children:"\ud83d\udd22 RANDAO and block.prevrandao"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)("b",{children:(0,r.jsx)(n.code,{children:"block.prevrandao"})})," serves as Ethereum's built-in randomness source, powered by the beacon chain's RANDAO mechanism:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Generated from thousands of validator contributions"}),"\n",(0,r.jsx)(n.li,{children:"Changes every block (~12 seconds)"}),"\n",(0,r.jsx)(n.li,{children:"Manipulation-resistant by design"}),"\n",(0,r.jsx)(n.li,{children:"Unpredictable beyond one epoch"}),"\n",(0,r.jsx)(n.li,{children:"Provides verifiable randomness at the protocol level"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Want to learn more? Check out these resources:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://eth2book.info/bellatrix/part2/building_blocks/randomness/",children:"Deep dive into RANDAO"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://eips.ethereum.org/EIPS/eip-4399",children:"EIP 4399: Supplant DIFFICULTY opcode with PREVRANDAO"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.youtube.com/watch?v=rUOBPu4W28c",children:"Video explanation of RANDAO"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-vdf-verifiable-delay-function",children:"\u23f1\ufe0f VDF (Verifiable Delay Function)"}),"\n",(0,r.jsxs)(n.p,{children:["The lottery implements the ",(0,r.jsx)(n.a,{href:"https://eprint.iacr.org/2018/627.pdf",children:"Pietrzak VDF"}),", a cryptographic function that enforces a time delay between input and output. Think of it as a cryptographic time-lock that ensures fairness through forced computation time."]}),"\n",(0,r.jsx)(n.h4,{id:"key-properties",children:"Key Properties"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sequential Computation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Operations must be performed in order"}),"\n",(0,r.jsx)(n.li,{children:"Cannot be parallelized or shortened"}),"\n",(0,r.jsx)(n.li,{children:"Hardware improvements don't significantly impact minimum time"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Efficient Verification"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verification takes milliseconds"}),"\n",(0,r.jsx)(n.li,{children:"On-chain verification possible"}),"\n",(0,r.jsx)(n.li,{children:"Compact proofs (~1kb)"}),"\n",(0,r.jsx)(n.li,{children:"Low gas costs for submission"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Deterministic Security"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Consistent input/output mapping"}),"\n",(0,r.jsx)(n.li,{children:"Future-proof design principles"}),"\n",(0,r.jsx)(n.li,{children:"No hidden randomness in computation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Want to learn more? Check out these resources:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://vdfresearch.org/",children:"VDF Research Blog"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.youtube.com/watch?v=qf1CN5n8aHM",children:"Video explanation of VDFs"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-why-this-approach-matters",children:"\ud83e\udd14 Why This Approach Matters"}),"\n",(0,r.jsx)(n.h3,{id:"1-\ufe0f-validator-neutralization",children:"1. \ud83d\udee1\ufe0f Validator Neutralization"}),"\n",(0,r.jsx)(n.p,{children:"The combination of RANDAO and VDF ensures that validators cannot predict or influence the outcome, maintaining true randomness in the drawing process."}),"\n",(0,r.jsx)(n.h3,{id:"2--front-running-prevention",children:"2. \ud83d\udd12 Front-Running Prevention"}),"\n",(0,r.jsx)(n.p,{children:"The mandatory computation delay creates a temporal barrier that prevents any form of front-running or last-minute exploitation."}),"\n",(0,r.jsx)(n.h3,{id:"3--complete-verifiability",children:"3. \ud83d\udd0d Complete Verifiability"}),"\n",(0,r.jsx)(n.p,{children:"Every step in the process can be independently verified on-chain, ensuring transparency without compromising security."}),"\n",(0,r.jsx)(n.h3,{id:"4--future-proof-design",children:"4. \ud83d\udcaa Future-Proof Design"}),"\n",(0,r.jsx)(n.p,{children:"The time-locked nature of VDF computation maintains security even as computational power advances, protecting against future technological improvements."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(6540);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);